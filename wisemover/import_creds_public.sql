DROP TABLE IF EXISTS creds;
DROP INDEX IF EXISTS creds_gindx;

CREATE TABLE IF NOT EXISTS creds (
		id INT PRIMARY KEY,
		LSOA11 VARCHAR(255) NULL,
		DomMet11 NUMERIC NULL,
		DomMet17 NUMERIC NULL,
		MeanDomElec11kWh NUMERIC NULL,
		MeanDomElec17kWh NUMERIC NULL,
		TotDomElec11kWh NUMERIC NULL,
		TotDomElec17kWh NUMERIC NULL,
		GasMet11 NUMERIC NULL,
		GasMet17 NUMERIC NULL,
		MeanDomGas11kWh NUMERIC NULL,
		MeanDomGas17kWh NUMERIC NULL,
		TotDomGas11kWh NUMERIC NULL,
		TotDomGas17kWh NUMERIC NULL,
		meanhouseage NUMERIC NULL,
		pP1900 NUMERIC NULL,
		p190018 NUMERIC NULL,
		p191929 NUMERIC NULL,
		p193039 NUMERIC NULL,
		p194554 NUMERIC NULL,
		p195564 NUMERIC NULL,
		p196572 NUMERIC NULL,
		p197382 NUMERIC NULL,
		p198392 NUMERIC NULL,
		p199399 NUMERIC NULL,
		p200009 NUMERIC NULL,
		p201015 NUMERIC NULL,
		pUNKNOWN NUMERIC NULL,
		People NUMERIC NULL,
		AreaHectares NUMERIC NULL,
		PopDens NUMERIC NULL,
		Males NUMERIC NULL,
		Females NUMERIC NULL,
		LiveHH NUMERIC NULL,
		LiveComm NUMERIC NULL,
		AgeMean NUMERIC NULL,
		AgeMedian NUMERIC NULL,
		Age0to4 NUMERIC NULL,
		Age5to7 NUMERIC NULL,
		Age8to9 NUMERIC NULL,
		Age10to14 NUMERIC NULL,
		Age15 NUMERIC NULL,
		Age16to17 NUMERIC NULL,
		Age18to19 NUMERIC NULL,
		Age20to24 NUMERIC NULL,
		Age25to29 NUMERIC NULL,
		Age30to44 NUMERIC NULL,
		Age45to59 NUMERIC NULL,
		Age60to64 NUMERIC NULL,
		Age65to74 NUMERIC NULL,
		Age75to84 NUMERIC NULL,
		Age85to89 NUMERIC NULL,
		Age90plus NUMERIC NULL,
		Unshared NUMERIC NULL,
		Shared2 NUMERIC NULL,
		Shared3plus NUMERIC NULL,
		HHwithRes NUMERIC NULL,
		HHnoRes NUMERIC NULL,
		WholeHouseDetached NUMERIC NULL,
		WholeHouseSemi NUMERIC NULL,
		WholeHouseTerraced NUMERIC NULL,
		FlatPurposeBuilt NUMERIC NULL,
		FlatConverted NUMERIC NULL,   
		FlatCommercial NUMERIC NULL,
		Caravan NUMERIC NULL,
		Outright NUMERIC NULL,
		Mortgage NUMERIC NULL,
		Shared NUMERIC NULL,
		SocialLA NUMERIC NULL,
		SocialOther  NUMERIC NULL,      
		RentedLandlord NUMERIC NULL,
		RentedOther NUMERIC NULL,
		RentFree NUMERIC NULL,
		NoCH NUMERIC NULL,
		OccupancyRooms NUMERIC NULL,
		OccupancyBedrooms NUMERIC NULL,
		NoCarsHH NUMERIC NULL,
		X1CarHH NUMERIC NULL,
		X2CarHH NUMERIC NULL,
		X3CarHH NUMERIC NULL,
		X4plusCarHH NUMERIC NULL,
		PartTime NUMERIC NULL,
		FullTime NUMERIC NULL,
		SelfEmp   NUMERIC NULL,         
		Unemployed NUMERIC NULL,
		FTStudent NUMERIC NULL,
		Retired NUMERIC NULL,
		StudentInactive NUMERIC NULL,
		Carer NUMERIC NULL,
		Sick NUMERIC NULL,
		InactiveOther NUMERIC NULL,     
		Unemp16to24 NUMERIC NULL,
		Unemp50to74 NUMERIC NULL,
		UnempNeverWorked NUMERIC NULL,
		UnempLongTerm NUMERIC NULL,
		AllT2W NUMERIC NULL,
		T2WHome NUMERIC NULL,
		T2WMetro NUMERIC NULL,          
		T2WTrain NUMERIC NULL,
		T2WBus NUMERIC NULL,
		T2WTaxi NUMERIC NULL,
		T2WMbike NUMERIC NULL,
		T2WCar NUMERIC NULL,
		T2WPassenger NUMERIC NULL,
		T2WCycle  NUMERIC NULL,         
		T2WFoot NUMERIC NULL,
		T2WOther NUMERIC NULL,
		T2WNoEmp NUMERIC NULL,
		AllGrade NUMERIC NULL,
		SocGradeAB NUMERIC NULL,
		SocGradeC1 NUMERIC NULL,
		SocGradeC2 NUMERIC NULL,
		SocGradeDE NUMERIC NULL,
		pHeatingNone NUMERIC NULL,
		pHeatingGas NUMERIC NULL,
		pHeatingElectric NUMERIC NULL,
		pHeatingOther NUMERIC NULL,
		Dwellings NUMERIC NULL,
		CrrEE    NUMERIC NULL,          
		PtnEE NUMERIC NULL,
		pop2011 NUMERIC NULL,
		pop2016 NUMERIC NULL,
		areakm NUMERIC NULL,
		dense2011 NUMERIC NULL,
		dense2017 NUMERIC NULL,
		meanhouseholdsize  NUMERIC NULL,
		meanrooms NUMERIC NULL,
		meanbedrooms NUMERIC NULL,
		geom GEOMETRY NOT NULL

    );

COPY creds FROM '/home/malcolm/creds_lsoa_public.csv'  csv HEADER;

ALTER TABLE creds OWNER to wisemove;

CREATE INDEX creds_gindx ON creds USING GIST (geom);

GRANT SELECT ON creds TO wisemovepublic;



